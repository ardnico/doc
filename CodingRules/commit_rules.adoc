= Commit Rules
:toc: left
:toclevels: 2
:sectnums:

== Purpose
This document defines the commit rules for some projects.  
It ensures that every commit message is clear, consistent, and useful for both current and future contributors.

== General Principles
- Each commit should represent a single logical change.
- Keep commits small but meaningful; avoid mixing unrelated changes.
- Write messages that explain *why* the change was made, not only *what* was changed.
- Always verify that the code passes tests and linters before committing.

== Commit Message Format
This project follows the *Conventional Commits* specification.

The general structure is:

----
<type>(<optional scope>): <short summary>

<optional detailed description>

<optional footer>
----

=== Example
----
feat(parser): add support for YAML input
----

=== Allowed Types
- `feat` — a new feature
- `fix` — a bug fix
- `docs` — documentation changes
- `style` — formatting only, no code change
- `refactor` — code changes that neither fix a bug nor add a feature
- `test` — adding or updating tests
- `chore` — maintenance tasks (build scripts, dependencies, etc.)
- `perf` — performance improvement

=== Description Guidelines
- Limit the subject line to 72 characters.
- Use the imperative mood (e.g., "add", "fix", "update", not "added" or "fixed").
- Capitalize only the first letter of the subject.
- Do not end the subject line with a period.
- If the commit closes an issue, reference it in the footer:
  ----
  Closes #42
  ----

== Commit Granularity
- A commit should contain a cohesive change. For example, "add a function and its unit tests" is good; "add multiple unrelated features" is not.
- Avoid committing large files generated by tools (e.g., `.pyc`, cache files, virtual environments).
- Use `.gitignore` to prevent accidental commits of local artifacts.

== Branching and Merging
- Use short-lived feature branches named by purpose, e.g. `feature/add-logging` or `fix/cli-args`.
- Prefer *squash merges* to keep the main branch history clean.
- Ensure each merge message summarizes the feature or fix clearly.

== Commit Frequency
- Commit often enough to capture logical steps.
- Avoid committing half-broken code unless the work-in-progress is explicitly marked (e.g., `wip:`).

== References
- Conventional Commits: https://www.conventionalcommits.org/en/v1.0.0/
- Semantic Versioning: https://semver.org/

== Example History
----
feat(api): add endpoint for user registration
fix(api): handle missing parameters correctly
docs(readme): update installation instructions
refactor(auth): simplify token validation logic
----

== Summary
Clean, structured commits make collaboration easier and history readable.  
Follow these rules to maintain a healthy and understandable codebase.
